# * python scripts/run_job.py --config-dir=$(pwd)/configs/ --config-name=chest-xray-experiments
# * python scripts/run_job.py --config-dir=$(pwd)/configs/ --config-name=chest-xray-experiments -m

# Different multi-run commands:
# * job.use_pretrained=true datasets.preprocessing.use_sampling=false job.device=0
# * job.use_pretrained=true datasets.preprocessing.use_sampling=true datasets.preprocessing.sampling_method.sample_to_value=3500,5000 job.device=1
# * models.model.model_name=resnet50,xception
# * models.model.model_name=vit_base_patch16_clip_384
# * models.optimizer.lr=0.0001,0.00001 +models.optimizer.weight_decay=0.001

defaults:
  - _self_
  - datasets: chest-xray14-dataset
  - job: run-eval
  - models: default-model
  # module configurations
  - ignite: ignite
  - mlflow: local
  - sklearn: classifier
  # overrides:
  - override hydra/job_logging: colorlog
  - override hydra/hydra_logging: colorlog

date: ${now:%Y-%m-%d}
postfix: ""
timestamp: ${now:%H-%M-%S}

hydra:
  job:
    chdir: true
  sweep:
    dir: outputs/${hydra.job.config_name}/${date}/${timestamp}
    subdir: ${hydra.job.override_dirname}
  run:
    dir: outputs/${hydra.job.config_name}/${date}/${timestamp}
